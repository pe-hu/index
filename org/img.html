<?php
function h($str) {
    return htmlspecialchars($str, ENT_QUOTES, 'UTF-8');
}
$org = (string)filter_input(INPUT_POST, 'org');
$size = (string)filter_input(INPUT_POST, 'size');
$img = (string)filter_input(INPUT_POST, 'img');
$title = (string)filter_input(INPUT_POST, 'title');
$text = (string)filter_input(INPUT_POST, 'text');

$fp = fopen('index.csv', 'a+b');
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    flock($fp, LOCK_EX);
    fputcsv($fp, [$org, $size, $img, $title, $text]);
    rewind($fp);
}

flock($fp, LOCK_SH);
while ($row = fgetcsv($fp)) {
    $rows[] = $row;
}
flock($fp, LOCK_UN);
fclose($fp);

?>

    <!DOCTYPE html>
    <html lang="ja">

    <head>
        <title>P E H U is | Things that I (We) owned</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="stylesheet.css" />
        <style>
            body,
            ol,
            li {
                padding: 0;
                margin: 0;
            }
            
            #catalog li {
                margin: 2.5vw;
                width: 10rem;
                max-width: 90vw;
                max-height: 90vw;
            }
            
            #catalog li img {
                max-width: 100%;
                max-height: 100%;
            }
        </style>
    </head>

    <body>

        <ol id="catalog" class="org">
            <li class="list_item list_toggle" data-org="made">
                <img src="img/PEHU01.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggl" data-org="made">
                <img src="img/PEHU02.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle b4" data-org="bought">
                <img src="img/tojitakun.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a4" data-org="bought">
                <img src="img/bbq.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a4" data-org="sale">
                <img src="img/1F05.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle b4" data-org="free">
                <img src="img/fan.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle b4" data-org="other">
                <img src="img/omikuzi.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a4" data-org="made">
                <img src="https://creative-community.space/pehu/weare/bookcover.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle note" data-org="collaborations">
                <img src="https://creative-community.space/value/gallery/000.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle b4" data-org="bought">
                <img src="img/VGCTLG.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a6" data-org="bought">
                <img src="img/selpic.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle b5" data-org="sale">
                <img src="img/1F04.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a6" data-org="sale">
                <img src="img/1F03.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a3" data-org="collaborations">
                <img src="https://creative-community.space/pehu/publication/5dition/5dition.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle b4" data-org="collaborations">
                <img src="diary/image.jpg">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a5" data-org="bought">
                <img src="img/ql800.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle min" data-org="sale">
                <img src="https://creative-community.space/value/still/000.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle b5" data-org="sale">
                <img src="https://creative-community.space/essay/book/004.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle note" data-org="other">
                <img src="https://creative-community.space/essay/thinknote/pr/cover.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a5" data-org="gift">
                <img src="img/kalanchoe_beauverdii.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a6" data-org="other">
                <img src="img/tramp.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a6" data-org="made">
                <img src="https://creative-community.space/pehu/31q/a.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a5" data-org="sale">
                <img src="https://creative-community.space/value/book/book.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a6" data-org="free">
                <img src="img/pen.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle min" data-org="sale">
                <img src="https://creative-community.space/pehu/dm/this.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle a6" data-org="collaborations">
                <img src="img/ezco.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle min" data-org="free">
                <img src="img/KN01.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle min" data-org="gift">
                <img src="img/pin.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle min" data-org="bought">
                <img src="img/dog.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle min" data-org="free">
                <img src="img/KN00.png">
                <a class="" href="" target="_parent"></a>
            </li>
            <li class="list_item list_toggle min" data-org="gift">
                <img src="img/horse.png">
                <a class="" href="" target="_parent"></a>
            </li>
        </ol>

        <script type="text/javascript ">
            var volume;
            var synth;
            var notes;

            $(document).ready(function(event) {
                // StartAudioContext(Tone.context, window);  
                $(window).click(function() {
                    Tone.context.resume();
                });

                volume = new Tone.Volume(-10);
                synth = new Tone.PolySynth(10, Tone.Synth).chain(volume, Tone.Master);
                notes = Tone.Frequency("E6").harmonize([12, 14, 16, 19, 21, 24]);
            });

            $(".list_toggle").hover(function() {
                let randNote = Math.floor(Math.random() * notes.length);
                synth.triggerAttackRelease(notes[randNote], "6n");
            });
        </script>
    </body>

    </html>